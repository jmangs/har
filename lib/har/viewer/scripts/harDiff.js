(function(){function c(a,b){var c=[],d=[],e=0,f=0;while(e<a.length&&f<b.length)if(a[e]===b[f])c.push(a[e++]),d.push(b[f++]);else{var g=$.inArray(a[e],b),h=$.inArray(b[f],a);if(g&&g>f)while(f<g)c.push(null),d.push(b[f++]);else if(h&&h>e)while(e<h)c.push(a[e++]),d.push(null);else c.push(a[e++]),c.push(null),d.push(null),d.push(b[f++])}while(e<a.length)c.push(a[e++]),d.push(null);while(f<b.length)c.push(null),d.push(b[f++]);console.log(c.length+" < > "+d.length);return[c,d]}function b(a,b){var c=window.location.search.substring(1),d=c.split("&");for(var e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]==a)return f[1]}return b}function a(a){var d=a.target.repObject.model;$(".pageTable").css({width:"50%","float":"left"});var e=d.input.log.pages;if(e.length==2){var f=d.input.log.entries,g=b("queryString","false")==="true",h=b("sort","true")==="true",i=[[],[]],j=[[],[]],k=f.length;for(var l=0;l<k;l++){var m=f[l];s=m.request.url,g===!1&&(s=s.split("?")[0]),m.pageref===e[0].id?(s in i[0]===!1&&(i[0][s]=[]),i[0][s].push(m),j[0].push(s)):m.pageref===e[1].id&&(s in i[1]===!1&&(i[1][s]=[]),i[1][s].push(m),j[1].push(s))}h&&(j[0].sort(),j[1].sort());var n=1.25,o=20,p=1.6,q=[0,0],j=c(j[0],j[1]),r=j[0].length;for(l=0;l<r;l++){j[0][l]===null&&$($($("table.pageTable")[0]).find("tr.netRow")[l-q[0]++]).before("<tr class='diff-spacer'><td colspan='6'>&nbsp;</td></tr>"),j[1][l]===null&&$($($("table.pageTable")[1]).find("tr.netRow")[l-q[1]++]).before("<tr class='diff-spacer'><td colspan='6'>&nbsp;</td></tr>");var s=j[0][l]||j[1][l],t=[s in i[0]?i[0][s].shift():undefined,s in i[1]?i[1][s].shift():undefined],u=$("table.netTable tr:nth-child("+(parseInt(l,10)+2)+")");if(t[0]&&t[1]){if(u.filter(".diff-spacer").length===1){u.filter(".diff-spacer").addClass("diff-moved");var v=$("table.pageTable:eq(1) tr.netRow:not(.diff-moved,.diff-changed,.diff-added,.diff-removed)"),w=v.length;for(var x=0;x<w;x++){var y=$(v[x]).find(".netFullHrefLabel").text();g===!1&&(y=y.split("?")[0]);if(s===y||decodeURIComponent(s)===y)break}u[1]=v[x]}var z=!1;t[0].response.status!==t[1].response.status&&(z=!0,u.find(".netStatusLabel").addClass("diff-highlight"));if(t[0].timings.blocked*n+o<t[1].timings.blocked||t[0].timings.connect*n+o<t[1].timings.connect||t[0].timings.dns*n+o<t[1].timings.dns||t[0].timings.receive*n+o<t[1].timings.receive||t[0].timings.send*n+o<t[1].timings.send||t[0].timings.ssl*n+o<t[1].timings.ssl||t[0].timings.wait*n+o<t[1].timings.wait||t[1].timings.blocked*n+o<t[0].timings.blocked||t[1].timings.connect*n+o<t[0].timings.connect||t[1].timings.dns*n+o<t[0].timings.dns||t[1].timings.receive*n+o<t[0].timings.receive||t[1].timings.send*n+o<t[0].timings.send||t[1].timings.ssl*n+o<t[0].timings.ssl||t[1].timings.wait*n+o<t[0].timings.wait)z=!0,u.find(".netTimeLabel").addClass("diff-highlight");if(t[0].response.bodySize*p<t[1].response.bodySize||t[1].response.bodySize*p<t[0].response.bodySize)z=!0,u.find(".netSizeLabel").addClass("diff-highlight");g===!1&&t[0].request.url!==t[1].request.url&&(z=!0,u.find(".netHrefLabel:not(.netFullHrefLabel)").addClass("diff-highlight")),z===!0&&u.addClass("diff-changed")}else t[1]?u.addClass("diff-added"):t[0]?u.addClass("diff-removed"):$($("table.pageTable:eq(0) tr")[parseInt(l,10)+3]).addClass("diff-moved")}$(".netTable > tbody > tr:nth-child(1n+2)").height($($(".netRow")[1]).height()),$(".netTable > tbody > tr:nth-child(1n+2)").click(function(a){if(a.originalEvent.custom===undefined){var b;document.createEvent?(b=document.createEvent("MouseEvents"),b.initMouseEvent(a.type,a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget),b.custom=!0):document.createEventObject&&(b=document.createEventObject(),b.custom=!0),$(".netTable:eq("+($($(this).parents()[5]).index()+1)%2+") > tbody > tr:nth-child("+($(this).prevAll().length+1)+") div.netDomainLabel").each(function(){this.dispatchEvent?this.dispatchEvent(b):this.fireEvent&&this.fireEvent("onclick",b)})}}),$("tr.pageRow").remove()}}b("diff","false")==="true"&&$("#content").bind("onViewerHARLoaded",a).bind("onPreviewHARLoaded",a)})()